<!DOCTYPE html>
<html lang="ja">

<div class="nav">
  <button onclick="location.href='index.html'">タイムスケジュール</button>
  <button onclick="location.href='シフト表.html'">シフト表</button>
  <button onclick="location.href='予約管理ページ.html'">予約管理</button>
  <button onclick="location.href='割引設定ページ.html'">割引設定ページ</button>
  <button class="active" onclick="location.href='キャストオプションリスト.html'">キャストオプションリスト</button>
</div>

<head>
  <meta charset="UTF-8">
  <title>キャストオプションリスト</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 10px; font-size: 11px; }
    table { border-collapse: collapse; width: 100%; table-layout: fixed; }
    th, td { border: 1px solid #ccc; padding: 3px; text-align: center; }
    th { background: #f0f0f0; position: sticky; top: 0; }
    select, input { font-size: 11px; width: 95%; }
    .top-bar { margin-bottom: 10px; }
  </style>
</head>
<body>
  <h2>キャストオプションリスト（保存ページ）</h2>
  <div class="top-bar">
    <button onclick="saveOptionList()">保存</button>
    <button onclick="addRow()">＋キャスト追加</button>
    <span id="status"></span>
  </div>

  <table id="optionTable">
    <thead>
      <tr>
        <th>キャスト名</th>
        <th>ノーパン・ノーブラ派遣</th>
        <th>ストッキング破り</th>
        <th>コスプレ</th>
        <th>アイマスク</th>
        <th>電マ</th>
        <th>ローター</th>
        <th>聖水</th>
        <th>バイブ</th>
        <th>即尺</th>
        <th>顔射</th>
        <th>ごっくん</th>
        <th>顔無し動画</th>
        <th>顔有り動画</th>
        <th>写真撮影(1枚毎)</th>
        <th>顔無写真撮影取り放題</th>
        <th>顔有写真撮影取り放題</th>
        <th>AF</th>
      </tr>
    </thead>
    <tbody id="optionBody"></tbody>
  </table>

  <script>
    const optionNames = [
      "ノーパン・ノーブラ派遣","ストッキング破り","コスプレ","アイマスク","電マ","ローター","聖水",
      "バイブ","即尺","顔射","ごっくん","顔無し動画","顔有り動画","写真撮影(1枚毎)",
      "顔無写真撮影取り放題","顔有写真撮影取り放題","AF"
    ];

    // 金額プルダウン（×、0〜20000 / 500円刻み）
    function buildPriceSelect(value) {
      let html = `<select><option value=""></option><option value="×" ${value==="×"?"selected":""}>×</option>`;
      for (let i = 0; i <= 20000; i += 500) {
        html += `<option value="${i}" ${value==i?"selected":""}>${i}</option>`;
      }
      html += "</select>";
      return html;
    }

    // キャスト1行生成
    function createRow(castName="", data={}) {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td><input type="text" value="${castName}"></td>` +
        optionNames.map(opt=>{
          const val = (opt in data) ? data[opt] : "";
          return `<td>${buildPriceSelect(val)}</td>`;
        }).join("");
      return tr;
    }

    // 保存
    function saveOptionList() {
      const tbody = document.getElementById("optionBody");
      const result = {};
      [...tbody.rows].forEach(row=>{
        const cast = row.cells[0].querySelector("input").value.trim();
        if (!cast) return;
        const data = {};
        optionNames.forEach((opt,idx)=>{
          const val = row.cells[idx+1].querySelector("select").value;
          if (val) data[opt] = val;  // "×" も保存
        });
        result[cast] = data;
      });
      localStorage.setItem("optionPriceMap", JSON.stringify(result));
      document.getElementById("status").textContent = "保存しました！";
    }

    // キャスト追加
    function addRow() {
      const tbody = document.getElementById("optionBody");
      if (tbody.rows.length >= 80) {
        alert("最大80名までです");
        return;
      }
      tbody.appendChild(createRow());
    }

    // ===== サンプルデータ（コピペ追加可） =====
    const initialData = {
      "あい": {
        "ノーパン・ノーブラ派遣":1000, "ストッキング破り":1000, "コスプレ":1000,
        "アイマスク":2000, "電マ":2000, "聖水":2000
      },
      "あこ": {
        "ノーパン・ノーブラ派遣":1000, "ストッキング破り":1000, "コスプレ":1000,
        "アイマスク":2000, "電マ":2000, "ローター":2000, "聖水":2000, "バイブ":3000,
        "即尺":3000, "顔射":4000, "ごっくん":5000, "顔無し動画":5000
      },
      "あくあ": {
        "ノーパン・ノーブラ派遣":1000, "ストッキング破り":1000, "コスプレ":1000,
        "アイマスク":2000, "電マ":2000, "ローター":2000, "聖水":2000, "バイブ":3000,
        "即尺":3000, "顔無し動画":5000
      }
      // ← ここにあなたの持っている表のデータをコピペ追加していけばOK
    };

    // 読込時
    window.addEventListener("load", ()=>{
      const tbody = document.getElementById("optionBody");
      const saved = JSON.parse(localStorage.getItem("optionPriceMap")||"null");
      const data = saved || initialData;
      Object.keys(data).forEach(cast=>{
        tbody.appendChild(createRow(cast, data[cast]));
      });
      while (tbody.rows.length < 80) tbody.appendChild(createRow());
    });
  </script>
</body>
</html>

